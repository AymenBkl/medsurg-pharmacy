
<ion-content>

<ion-grid>
  <ion-row *ngIf="currentUser">
    <ion-col size="12" size-md="8" offset-md="2">
      <ion-card class="card" *ngFor="let message of messagesTotalReceived[currentSegmentType]">
        <ion-item lines="none" class="profile-holder" *ngIf="currentUser._id == message.from._id">
          <ion-avatar class="img">
            <img *ngIf="!currentUser || currentUser.imageUrl == ''" src="../../../assets/imgs/pharmacy-user-img.png">
            <img *ngIf="currentUser && currentUser.imageUrl != ''" [src]="currentUser.imageUrl">
          </ion-avatar>
          <div class="header">
          <ion-text class="name" >
            {{currentUser.firstname}} {{currentUser.lastname}}
          </ion-text>
          <ion-text class="date">
            
          </ion-text>
        </div>
        </ion-item>
        <ion-item lines="none" class="profile-holder" *ngIf="currentUser._id != message.from._id">
          <ion-avatar class="img">
            <img *ngIf="!message.from || message.from.imageUrl == ''" src="../../../assets/imgs/pharmacy-user-img.png">
            <img *ngIf="message.from && message.from.imageUrl != ''" [src]="currentUser.imageUrl">
          </ion-avatar>
          <div class="header">
          <ion-text class="name">
            {{message.from.firstname}} {{message.from.lastname}}
          </ion-text>
          <ion-text class="date">
            
          </ion-text>
        </div>
        </ion-item>
        <ion-item class="description" lines="none"  >
          <ion-textarea class="text"  [value]="message.message" rows="5" [disabled]="true">

          </ion-textarea>
        </ion-item>
        
      </ion-card>
    </ion-col>
  </ion-row>
</ion-grid>

<div class="spin" *ngIf="!currentUser">
  <ion-spinner name="bubbles"></ion-spinner>
</div>

<ion-segment (ionChange)="segmentChanged($event)"  value="sent"  class="segment-type"  slot="fixed" >
  <ion-segment-button value="sent">
    <ion-icon name="paper-plane-outline"></ion-icon>      
    <ion-label>Sent</ion-label>
  </ion-segment-button>
  <ion-segment-button value="recieved">
    <ion-icon name="chevron-down-circle-outline"></ion-icon>
    <ion-label>Recieved</ion-label>
  </ion-segment-button>
  
</ion-segment>

</ion-content>
